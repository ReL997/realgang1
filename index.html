<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>العالم الإجرامي</title>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<link href="https://fonts.googleapis.com/css2?family=Cairo&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Cairo', sans-serif;
  background-color: #0d0d0d;
  color: #f1f1f1;
  margin: 0;
  font-size: 14px;
  line-height: 1.7;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
header { position: relative; }
.navbar, header { position: relative; z-index: 1; }
.navbar { font-size: 14px; background:linear-gradient(90deg,#111,#1a1a1a,#111); }
.navbar-brand img { height: 40px; border-radius: 50%; margin-left: 10px; border:2px solid #ffcc00; }
.navbar-brand span { color:#ffcc00; font-weight:bold; text-shadow:0 0 5px #ffcc00aa; }
.navbar-nav .nav-link { color: #ccc !important; font-size: 13px; margin-right: 8px; }
.navbar-nav .nav-link:hover, .nav-tabs .nav-link.active { color: #000 !important; background:#ffcc00; border-radius:6px; font-weight:bold; }
.cards-list { display: flex; flex-direction: column; gap: 12px; margin-top:15px; }
.card-box {
  background: #1a1a1a;
  padding: 10px;
  border-radius: 8px;
  border: 2px solid #ffcc00;
  cursor: pointer;
  display: flex;
  align-items: flex-start;
  gap: 12px;
  transition: transform .2s;
}
.card-box:hover { transform: scale(1.02); }
.card-box img { border-radius: 6px; width: 130px; height: 90px; object-fit: cover; flex-shrink: 0; border:2px solid #444; }
.card-box h3 { font-size: 16px; color: #ffcc00; margin-bottom: 6px; }
.card-box p { font-size: 13px; color: #ccc; margin: 0; }
.article-detail { animation: flipIn 0.7s ease; transform-origin: center; }
@keyframes flipIn { 0% { transform: rotateY(90deg); opacity:0 } 60% { transform: rotateY(-10deg); opacity:1 } 100% { transform: rotateY(0); opacity:1 } }
.article-detail img { max-width: 100%; border-radius: 8px; border:3px solid #ffcc00; margin-bottom:15px; }
.article-detail p { white-space: pre-line; }
#backToTop { position: fixed; bottom: 70px; right: 25px; display: none; background: #ffcc00; color: #000; border: none; border-radius: 50%; padding: 10px 12px; font-size: 16px; cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.4); transition: all 0.3s; z-index: 10000; }
#backToTop:hover { background: #e6b800; }
footer { background:#111; color:#aaa; border-top:1px solid #333; text-align:center; padding:15px 8px; font-size: 12px; margin-top: auto; }
footer h6 { color:#ffcc00; margin-bottom:8px; font-size: 13px; }
footer a { color:#ffcc00; text-decoration:none; font-size: 13px; }
footer a:hover { text-decoration: underline; }
#adminPanel { display:none; background:#111; padding:15px; margin:15px; border:1px solid #333; border-radius:8px; }
#adminPanel input, #adminPanel select, #adminPanel textarea { width:100%; margin:6px 0; padding:6px; border-radius:5px; border:none; }
#adminPanel button { margin-top:8px; }
</style>
</head>
<body>

<header>
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top shadow-sm">
    <div class="container d-flex justify-content-between align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="#top">
        <img src="images/avatar.png" alt="شعار">
        <span>العالم الإجرامي</span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a class="nav-link active" href="#" onclick="filterArticles('MAIN')">🏠 الرئيسية</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="filterArticles('gangrules')">🔪 قوانين العصابات</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="filterArticles('chases')">🚓 سيناروهات</a></li>
          <li class="nav-item"><a class="nav-link" href="#" onclick="filterArticles('mafia')">🕴️ اهم شخصيات سباداروس</a></li>
        </ul>
      </div>
      <button id="openLogin" class="btn btn-warning btn-sm" style="border-radius:50%;padding:6px 10px;">⚙️</button>
    </div>
  </nav>
  <div style="height:70px;"></div>
</header>

<div id="adminPanel">
  <h4 style="color:#ffcc00;">إضافة / تعديل</h4>
  <button id="closeAdmin" class="btn btn-danger btn-sm" style="float:left;">❌ إخفاء اللوحة</button>
  <select id="type"><option value="article">مقال</option><option value="ad">إعلان</option></select>
  <input id="title" placeholder="العنوان">
  <input id="desc" placeholder="الوصف">
  <textarea id="content" placeholder="المحتوى"></textarea>
  <select id="category">
    <option value="gangrules">قوانين العصابات</option>
    <option value="chases">سيناروهات</option>
    <option value="mafia">المافيا</option>
  </select>
  <input type="file" id="imageInput">
  <input type="datetime-local" id="endTime">
  <button class="btn btn-success btn-sm" onclick="saveItem()">💾 حفظ</button>

  <!-- تغيير كلمة المرور -->
  <h5 style="color:#ffcc00; margin-top:15px;">🔑 تغيير كلمة المرور</h5>
  <input type="password" id="oldPassword" placeholder="كلمة المرور الحالية">
  <input type="password" id="newPassword" placeholder="كلمة المرور الجديدة">
  <button class="btn btn-primary btn-sm" onclick="changePassword()">تغيير كلمة المرور</button>
</div>

<div class="container mt-3" id="main-content"></div>
<button id="backToTop">🔝</button>

<footer>
  <h6>📞 تواصل معنا</h6>
  <div style="display:flex; justify-content:center; gap:20px; align-items:center; margin-bottom:8px;">
    <a href="mailto:salimhamarneh@gmail.com" title="البريد الإلكتروني">
      <img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" alt="Email" width="28" height="28">
    </a>
    <a href="https://discord.gg/ReL" target="_blank" title="ديسكورد">
      <img src="https://cdn-icons-png.flaticon.com/512/5968/5968756.png" alt="Discord" width="28" height="28">
    </a>
  </div>
  <small>Copyright © 2025 Reality Town & Salem - All Rights Reserved.</small>
</footer>

<div class="modal fade" id="loginModal" tabindex="-1">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content bg-dark text-light">
      <div class="modal-header">
        <h5 class="modal-title">تسجيل الدخول</h5>
        <button type="button" class="close text-light" data-dismiss="modal">&times;</button>
      </div>
      <form id="loginForm">
        <div class="modal-body">
          <input type="email" id="email" class="form-control mb-2" placeholder="البريد الإلكتروني" required>
          <input type="password" id="password" class="form-control" placeholder="كلمة المرور" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-warning btn-sm w-100">دخول</button>
        </div>
      </form>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
// بيانات
let articles = JSON.parse(localStorage.getItem("articles")) || [];
let ads = JSON.parse(localStorage.getItem("ads")) || [];
let currentPassword = localStorage.getItem("adminPassword") || "123456";

// فتح وغلق لوحة الإدارة
document.getElementById("openLogin").addEventListener("click",()=>$('#loginModal').modal('show'));
document.getElementById("closeAdmin").addEventListener("click",()=>document.getElementById("adminPanel").style.display="none");

// تسجيل الدخول
document.getElementById("loginForm").addEventListener("submit",function(e){
  e.preventDefault();
  let email=document.getElementById("email").value;
  let password=document.getElementById("password").value;
  if(email==="admin@example.com" && password===currentPassword){
    $('#loginModal').modal('hide');
    document.getElementById("adminPanel").style.display="block";
  } else alert("❌ البريد أو كلمة المرور غير صحيحة!");
});

// تغيير كلمة المرور
function changePassword(){
  const oldP = document.getElementById("oldPassword").value;
  const newP = document.getElementById("newPassword").value;
  if(oldP !== currentPassword){ alert("❌ كلمة المرور الحالية غير صحيحة"); return; }
  if(newP.trim()===""){ alert("⚠️ أدخل كلمة مرور جديدة"); return; }
  currentPassword = newP;
  localStorage.setItem("adminPassword", currentPassword);
  document.getElementById("oldPassword").value="";
  document.getElementById("newPassword").value="";
  alert("✅ تم تغيير كلمة المرور بنجاح");
}

// إدارة المقالات والإعلانات
function saveItem(){
  const type=document.getElementById("type").value;
  const title=document.getElementById("title").value;
  const desc=document.getElementById("desc").value;
  const content=document.getElementById("content").value;
  const category=document.getElementById("category").value;
  const endTime=document.getElementById("endTime").value;
  const file=document.getElementById("imageInput").files[0];
  if(!title||!desc||!content){alert("⚠️ الرجاء ملء جميع الحقول"); return;}
  if(file){
    const reader=new FileReader();
    reader.onload=function(e){ addItem(type,title,desc,content,e.target.result,endTime,category);}
    reader.readAsDataURL(file);
  } else addItem(type,title,desc,content,null,endTime,category);
}

function addItem(type,title,desc,content,img,endTime,category){
  const item={id:Date.now(),title,desc,content,thumbnail:img||"images/discord_benner.jpg",endTime,category};
  if(type==="article"){articles.push(item);localStorage.setItem("articles",JSON.stringify(articles));}
  else {ads.push(item);localStorage.setItem("ads",JSON.stringify(ads));}
  alert("✅ تم الحفظ بنجاح");
  filterArticles("MAIN");
}

function deleteItem(type,id){
  if(type==="article"){articles=articles.filter(a=>a.id!==id);localStorage.setItem("articles",JSON.stringify(articles));}
  else {ads=ads.filter(a=>a.id!==id);localStorage.setItem("ads",JSON.stringify(ads));}
  filterArticles("MAIN");
}

function filterArticles(category){
  const container=document.getElementById("main-content");
  container.innerHTML="";
  if(category==="MAIN"){
    container.innerHTML+=`<section><h2 style="color:#ffcc00;">📢 الإعلانات</h2><div id="ads-list" class="cards-list"></div></section>`;
    ads.forEach(ad=>{document.getElementById("ads-list").innerHTML+=
      `<div class="card-box" onclick="showAd(${ad.id})">
        <img src="${ad.thumbnail}"><div><h3>${ad.title}</h3><p>${ad.desc}</p></div>
      </div>`;});
  } else {
    container.innerHTML+=`<div class="cards-list" id="articles-list"></div>`;
    articles.filter(a=>a.category===category).forEach(a=>{
      document.getElementById("articles-list").innerHTML+=
      `<div class="card-box" onclick="showArticle(${a.id})">
        <img src="${a.thumbnail}"><div><h3>${a.title}</h3><p>${a.desc}</p></div>
      </div>`;
    });
  }
}

function showAd(id){
  const ad=ads.find(x=>x.id===id); if(!ad) return;
  document.getElementById("main-content").innerHTML=
  `<div class="article-detail">
    <h2 style="color:#ffcc00;">${ad.title}</h2>
    <img src="${ad.thumbnail}">
    <p>${ad.content}</p>
    <button class="btn btn-warning btn-sm" onclick="filterArticles('MAIN')">⬅ رجوع</button>
    <button class="btn btn-danger btn-sm" onclick="deleteItem('ad',${ad.id})">🗑 حذف</button>
  </div>`;
}

function showArticle(id){
  const a=articles.find(x=>x.id===id); if(!a) return;
  document.getElementById("main-content").innerHTML=
  `<div class="article-detail">
    <h2 style="color:#ffcc00;">${a.title}</h2>
    <img src="${a.thumbnail}">
    <p>${a.content}</p>
    <button class="btn btn-warning btn-sm" onclick="filterArticles('${a.category}')">⬅ رجوع</button>
    <button class="btn btn-danger btn-sm" onclick="deleteItem('article',${a.id})">🗑 حذف</button>
  </div>`;
}

// زر العودة للأعلى
let backToTop=document.getElementById("backToTop");
window.onscroll=function(){backToTop.style.display=(document.body.scrollTop>200||document.documentElement.scrollTop>200)?"block":"none";}
backToTop.onclick=function(){window.scrollTo({top:0,behavior:'smooth'});}

// عرض الرئيسية أول مرة
filterArticles("MAIN");
</script>
</body>
</html>
